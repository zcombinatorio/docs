---
title: "Confirm Withdrawal Transaction"
description: "POST /dlmm/withdraw/confirm - Submit signed withdrawal transactions to the blockchain"
---

## Overview

Confirms and submits signed liquidity withdrawal transactions to the Solana blockchain. This endpoint validates all transactions comprehensively and broadcasts them sequentially. The transactions remove liquidity from a Meteora DLMM pool, redeposit any excess tokens (to match market price), and transfer the correctly-ratioed amounts to the manager wallet.

<Warning>
**Concurrent request handling**: Only one withdrawal operation can be processed at a time for each pool. Additional requests will wait in queue.
</Warning>

<CodeGroup>

```bash curl
curl -X POST https://api.zcombinator.io/dlmm/withdraw/confirm \
  -H "Content-Type: application/json" \
  -d '{
    "signedTransactions": ["4MzR7dxJNJRVP1Q6k7Y3j8X...", "5KnS8exLMJSVQ2..."],
    "requestId": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"
  }'
```

```javascript fetch
const response = await fetch('https://api.zcombinator.io/dlmm/withdraw/confirm', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    signedTransactions: ["4MzR7dxJNJRVP1Q6k7Y3j8X...", "5KnS8exLMJSVQ2..."],
    requestId: "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"
  })
});

const result = await response.json();
```

```python requests
import requests

data = {
    "signedTransactions": ["4MzR7dxJNJRVP1Q6k7Y3j8X...", "5KnS8exLMJSVQ2..."],
    "requestId": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"
}

response = requests.post(
    'https://api.zcombinator.io/dlmm/withdraw/confirm',
    json=data,
    headers={'Content-Type': 'application/json'}
)

result = response.json()
```

</CodeGroup>

## Request Parameters

<ParamField body="signedTransactions" type="string[]" required>
  Array of Base58 encoded signed transactions from the manager wallet. Must match the order and count from `/dlmm/withdraw/build`.
</ParamField>

<ParamField body="requestId" type="string" required>
  Unique identifier returned from the `/dlmm/withdraw/build` endpoint
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if all transactions were submitted successfully
</ResponseField>

<ResponseField name="signatures" type="string[]">
  Array of transaction signatures (transaction IDs) on Solana
</ResponseField>

<ResponseField name="poolAddress" type="string">
  Address of the Meteora DLMM pool
</ResponseField>

<ResponseField name="tokenXMint" type="string">
  Mint address of Token X (base token) in the pool
</ResponseField>

<ResponseField name="tokenYMint" type="string">
  Mint address of Token Y (quote token) in the pool
</ResponseField>

<ResponseField name="withdrawalPercentage" type="number">
  Percentage of liquidity that was withdrawn
</ResponseField>

<ResponseField name="marketPrice" type="number">
  Market price used (Token Y per Token X, e.g., SOL per ZC)
</ResponseField>

<ResponseField name="withdrawn" type="object">
  Total amounts withdrawn from DLMM bins
  - `tokenX`: Base token amount (raw)
  - `tokenY`: Quote token amount (raw)
</ResponseField>

<ResponseField name="transferred" type="object">
  Amounts transferred to manager wallet (at market price ratio)
  - `tokenX`: Base token amount (raw)
  - `tokenY`: Quote token amount (raw)
</ResponseField>

<ResponseField name="redeposited" type="object">
  Excess amounts redeposited back to DLMM
  - `tokenX`: Base token amount (raw)
  - `tokenY`: Quote token amount (raw)
</ResponseField>

<ResponseField name="message" type="string">
  Success message
</ResponseField>

### Success Response

```json
{
  "success": true,
  "signatures": [
    "5J8Z9xKqH4nL2pR7vT3mB1cW6dF8yG4aS9jK2xM5nP8hQ3rV7wE1",
    "3K9Y2zLqJ5mN4pS8wU1nC7dE9fH2gB6aT0kL3xO8mQ2hR4sW6eF3"
  ],
  "poolAddress": "7jbhVZcYqCRmciBcZzK8L5B96Pyw7i1SpXQFKBkzD3G2",
  "tokenXMint": "zcraWGxqe41N9xPaThNAB8Xf6sxjEvnAhpKKEZ3xyqC",
  "tokenYMint": "So11111111111111111111111111111111111111112",
  "withdrawalPercentage": 12,
  "marketPrice": 0.0000040643,
  "withdrawn": {
    "tokenX": "8784740187834",
    "tokenY": "40288634947"
  },
  "transferred": {
    "tokenX": "8784740187834",
    "tokenY": "35700000000"
  },
  "redeposited": {
    "tokenX": "0",
    "tokenY": "4588634947"
  },
  "message": "Withdrawal transactions submitted successfully"
}
```

## Error Responses

<AccordionGroup>
  <Accordion title="400 - Missing Parameters">
    ```json
    {
      "error": "Missing required fields: signedTransactions (array) and requestId"
    }
    ```
  </Accordion>

  <Accordion title="400 - Request Not Found">
    ```json
    {
      "error": "Withdrawal request not found or expired. Please call /dlmm/withdraw/build first."
    }
    ```
  </Accordion>

  <Accordion title="400 - Transaction Count Mismatch">
    ```json
    {
      "error": "Expected 3 transactions, got 2"
    }
    ```
  </Accordion>

  <Accordion title="400 - Request Expired">
    ```json
    {
      "error": "Withdrawal request expired. Please create a new request."
    }
    ```
  </Accordion>

  <Accordion title="400 - Missing Blockhash">
    ```json
    {
      "error": "Invalid transaction 1: missing blockhash"
    }
    ```
  </Accordion>

  <Accordion title="400 - Fee Payer Mismatch">
    ```json
    {
      "error": "Transaction 1 fee payer must be manager wallet"
    }
    ```
  </Accordion>

  <Accordion title="400 - Invalid Manager Signature">
    ```json
    {
      "error": "Transaction 1 verification failed: Invalid manager wallet signature"
    }
    ```
  </Accordion>

  <Accordion title="400 - Transaction Modified">
    ```json
    {
      "error": "Transaction 1 verification failed: transaction has been modified"
    }
    ```
  </Accordion>

  <Accordion title="400 - Blockhash Expired">
    ```json
    {
      "error": "Invalid transaction: blockhash is expired. Please create new transactions."
    }
    ```
  </Accordion>
</AccordionGroup>

## Process Flow

<Steps>
<Step title="Validate Parameters">
Ensures signedTransactions array and requestId are provided
</Step>

<Step title="Retrieve Request Data">
Looks up the withdrawal request data using the requestId
</Step>

<Step title="Validate Transaction Count">
Ensures the number of signed transactions matches expected count
</Step>

<Step title="Acquire Pool Lock">
Ensures only one operation processes at a time for this pool
</Step>

<Step title="Check Request Age">
Verifies request is less than 10 minutes old
</Step>

<Step title="Validate Each Transaction">
For each transaction:
- Verify blockhash is present
- Verify fee payer is manager wallet
- Verify manager wallet signature is valid
- Verify transaction hasn't been tampered with (hash check)
</Step>

<Step title="Validate Blockhash">
Checks that the blockhash is still valid on-chain
</Step>

<Step title="Submit Transactions Sequentially">
Sends each transaction, waiting for confirmation before the next
</Step>

<Step title="Cleanup">
Removes the request data and releases the pool lock
</Step>
</Steps>

## Transaction Order

The transactions are executed in order:

1. **Remove Liquidity** (1+ transactions) - Withdraws tokens from DLMM bins
2. **Redeposit** (optional) - Adds excess tokens back to DLMM
3. **Transfer** - Sends correctly-ratioed amounts to manager wallet

<Info>
Each transaction must complete before the next one begins. The final signature in the `signatures` array is typically the transfer transaction.
</Info>

## Security Validations

<AccordionGroup>
  <Accordion title="Request Queueing">
    Only one liquidity operation can be processed per pool at a time. Concurrent requests are automatically queued.
  </Accordion>

  <Accordion title="Blockhash Validation">
    Prevents replay attacks by verifying the blockhash is recent (~60 seconds).
  </Accordion>

  <Accordion title="Manager Wallet Verification">
    Only the configured manager wallet can submit withdrawal transactions. Signature is cryptographically verified.
  </Accordion>

  <Accordion title="Transaction Integrity">
    SHA-256 hash comparison ensures transactions haven't been modified since build.
  </Accordion>

  <Accordion title="Sequential Confirmation">
    Each transaction is confirmed before the next is sent, ensuring atomic execution.
  </Accordion>
</AccordionGroup>

<Warning>
**Manager authorization required**: Only the configured manager wallet can execute withdrawals. The manager wallet must sign all transactions in the array.
</Warning>

## Rate Limiting

This endpoint is subject to rate limiting:
- **10 requests** per 5-minute window per IP
- Returns HTTP 429 when limit exceeded

## Transaction Confirmation

You can view each transaction on Solscan: `https://solscan.io/tx/{signature}`

## Best Practices

<Steps>
<Step title="Submit Quickly">
Submit within 60 seconds of receiving transactions from `/dlmm/withdraw/build`. Blockhashes expire quickly.
</Step>

<Step title="Handle Expiry">
If more than 10 minutes pass, create a new withdrawal request.
</Step>

<Step title="Sign All Transactions">
Ensure all transactions in the array are signed with the manager wallet.
</Step>

<Step title="Preserve Order">
Submit transactions in the same order as received from the build endpoint.
</Step>

<Step title="Handle Queueing">
If you receive a timeout, another request may be processing. Wait and retry.
</Step>
</Steps>

## Example: Full Withdrawal Flow

```javascript
import { Transaction, Keypair } from '@solana/web3.js';
import bs58 from 'bs58';

// Step 1: Build withdrawal
const buildResponse = await fetch('https://api.zcombinator.io/dlmm/withdraw/build', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    poolAddress: "7jbhVZcYqCRmciBcZzK8L5B96Pyw7i1SpXQFKBkzD3G2",
    withdrawalPercentage: 12
  })
});
const buildData = await buildResponse.json();

// Step 2: Sign all transactions
const managerKeypair = Keypair.fromSecretKey(/* your key */);
const signedTxs = buildData.transactions.map(txBase58 => {
  const tx = Transaction.from(bs58.decode(txBase58));
  tx.partialSign(managerKeypair);
  return bs58.encode(tx.serialize({ requireAllSignatures: false }));
});

// Step 3: Confirm withdrawal
const confirmResponse = await fetch('https://api.zcombinator.io/dlmm/withdraw/confirm', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    signedTransactions: signedTxs,
    requestId: buildData.requestId
  })
});
const confirmData = await confirmResponse.json();

console.log('Signatures:', confirmData.signatures);
console.log('Market Price:', confirmData.marketPrice);
console.log('Transferred:', confirmData.transferred);
```
