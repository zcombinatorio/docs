---
title: "Get Purchase History"
description: "GET /ico/:tokenAddress/purchase - Get user's ICO purchase history"
---

## Overview

Retrieves a user's purchase history for a specific ICO, including all purchases made, amounts bought, and transaction details.

<CodeGroup>

```bash curl
curl -X GET "https://api.zcombinator.io/ico/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/purchase?wallet=9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"
```

```javascript fetch
const tokenAddress = "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v";
const walletAddress = "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM";

const response = await fetch(
  `https://api.zcombinator.io/ico/${tokenAddress}/purchase?wallet=${walletAddress}`
);

const history = await response.json();
```

```python requests
import requests

token_address = "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"
wallet_address = "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"

response = requests.get(
    f'https://api.zcombinator.io/ico/{token_address}/purchase',
    params={'wallet': wallet_address}
)

history = response.json()
```

</CodeGroup>

## URL Parameters

<ParamField path="tokenAddress" type="string" required>
  The Solana token mint address of the ICO
</ParamField>

## Query Parameters

<ParamField query="wallet" type="string" required>
  Base58 encoded public key of the wallet to get purchase history for
</ParamField>

## Response

<ResponseField name="purchases" type="array">
  Array of purchase records
</ResponseField>

### Purchase Object

<ResponseField name="purchases[].id" type="number">
  Unique identifier for the purchase
</ResponseField>

<ResponseField name="purchases[].ico_sale_id" type="number">
  ID of the ICO sale
</ResponseField>

<ResponseField name="purchases[].wallet_address" type="string">
  Wallet address that made the purchase
</ResponseField>

<ResponseField name="purchases[].sol_amount_lamports" type="string">
  Amount of SOL paid in lamports
</ResponseField>

<ResponseField name="purchases[].tokens_bought" type="string">
  Total number of tokens purchased
</ResponseField>

<ResponseField name="purchases[].tokens_to_vault" type="string">
  Number of tokens sent to vault (50% of purchase)
</ResponseField>

<ResponseField name="purchases[].tokens_claimable" type="string">
  Number of tokens claimable from escrow (50% of purchase)
</ResponseField>

<ResponseField name="purchases[].transaction_signature" type="string">
  Solana transaction signature for the purchase
</ResponseField>

<ResponseField name="purchases[].created_at" type="string">
  ISO 8601 timestamp of when the purchase was made
</ResponseField>

### Success Response

```json
{
  "purchases": [
    {
      "id": 1,
      "ico_sale_id": 1,
      "wallet_address": "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM",
      "sol_amount_lamports": "1000000000",
      "tokens_bought": "50000000000000",
      "tokens_to_vault": "25000000000000",
      "tokens_claimable": "25000000000000",
      "transaction_signature": "5VfYiDvQMBSWxKJLa9NLPQ1x3...",
      "created_at": "2024-01-15T10:30:00.000Z"
    },
    {
      "id": 2,
      "ico_sale_id": 1,
      "wallet_address": "9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM",
      "sol_amount_lamports": "500000000",
      "tokens_bought": "25000000000000",
      "tokens_to_vault": "12500000000000",
      "tokens_claimable": "12500000000000",
      "transaction_signature": "3AbCdEfGhIjKlMnOpQr...",
      "created_at": "2024-01-15T14:45:00.000Z"
    }
  ]
}
```

### No Purchases Response

```json
{
  "purchases": []
}
```

## Error Responses

<AccordionGroup>
  <Accordion title="400 - Missing Wallet">
    ```json
    {
      "error": "Wallet address is required"
    }
    ```
  </Accordion>

  <Accordion title="400 - Invalid Token Address">
    ```json
    {
      "error": "Invalid token address format"
    }
    ```
  </Accordion>

  <Accordion title="400 - Invalid Wallet Address">
    ```json
    {
      "error": "Invalid wallet address format"
    }
    ```
  </Accordion>

  <Accordion title="500 - Server Error">
    ```json
    {
      "error": "Failed to fetch purchases"
    }
    ```
  </Accordion>
</AccordionGroup>

## Token Distribution Breakdown

Each purchase splits tokens between vault and escrow:

| Field | Description | Percentage |
|-------|-------------|------------|
| `tokens_bought` | Total tokens from the purchase | 100% |
| `tokens_to_vault` | Tokens sent immediately to vault | 50% |
| `tokens_claimable` | Tokens held in escrow for later claim | 50% |

## Rate Limiting

This endpoint is subject to rate limiting:
- **30 requests per IP** per 1-minute window
- Returns HTTP 429 when limit exceeded

## Integration Tips

<Tip>
Use this endpoint to show users their total investment in an ICO, including how many tokens they can claim once the sale is finalized.
</Tip>

<Note>
The `tokens_claimable` field shows tokens that will be available to claim after the ICO is finalized. Check [Get Claim Info](/api-reference/ico/claim-info) for current claimable balance.
</Note>

## Next Steps

After viewing purchase history:

1. **Check claimable tokens**: [Get Claim Info](/api-reference/ico/claim-info)
2. **Make another purchase**: [Purchase Prepare](/api-reference/ico/purchase-prepare) (if sale is still active)
3. **Claim tokens**: [Claim Prepare](/api-reference/ico/claim-prepare) (if sale is finalized)
